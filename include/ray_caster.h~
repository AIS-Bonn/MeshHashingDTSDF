//
// Created by wei on 17-3-17.
//

#ifndef MRF_VH_RAY_CASTER_H
#define MRF_VH_RAY_CASTER_H

#include "hash_table.h"
#include "sensor.h"
#include "ray_caster_data.h"
#include "ray_caster_param.h"

class CUDARayCastSDF {
public:
  CUDARayCastSDF(const RayCastParams& params) {
    create(params);
  }

  ~CUDARayCastSDF(void) {
    destroy();
  }

  void render(const HashData& hashData, const HashParams& hashParams, const DepthCameraData& cameraData, const float4x4& lastRigidTransform);

  const RayCastData& getRayCastData(void) {
    return m_data;
  }
  const RayCastParams& getRayCastParams() const {
    return m_params;
  }

  // debugging
  void convertToCameraSpace(const DepthCameraData& cameraData);

private:

  void create(const RayCastParams& params);
  void destroy(void);

  RayCastParams m_params;
  RayCastData m_data;

};



#endif //MRF_VH_RAY_CASTER_H
